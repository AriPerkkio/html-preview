import{S as O,i as U,s as I,e as E,k as A,t as W,c as m,a as _,m as C,h as Y,d as b,b as g,g as j,J as f,M as G,K as w,P as M}from"../chunks/vendor-45d99f9f.js";function S(t,e){if(q(t,e))return B(t,e);const s=Array.from(e.childNodes).slice(t.childNodes.length),o=[];t.childNodes.forEach((i,l)=>{const a=e.childNodes[l];if(!a)return o.push(i);(i.hasChildNodes()||a.hasChildNodes())&&S(i,a),N(i)&&N(a)&&i.textContent!==a.textContent&&(i.textContent=a.textContent)});for(const i of o)t.removeChild(i);for(const i of s)t.appendChild(i);if(h(t)){const i=H(t),l=H(e),a=h(e);for(const{key:n,value:d}of l)t.getAttribute(n)!==d&&t.setAttribute(n,d);for(const{key:n}of i)a&&(e.hasAttribute(n)||t.removeAttribute(n))}}function h(t){return t!=null&&t.nodeType===Node.ELEMENT_NODE}function N(t){return t.nodeType===Node.TEXT_NODE}function H(t){return h(t)?t.getAttributeNames().reduce((e,s)=>[...e,{key:s,value:t.getAttribute(s)||""}],[]):[]}function q(t,e){return t.nodeType!==e.nodeType?!0:h(t)&&h(e)?t.tagName!==e.tagName:t.textContent!==e.textContent}function B(t,e){h(t)?t.replaceWith(e):N(t)&&N(e)?t.textContent=e.textContent:N(t)&&h(e)?t.parentElement?t.parentElement.replaceChild(e,t):console.warn(`Unexpected case, missing parentElement: ${t}`):console.warn(["Unexpected case:",`isElement(current): ${h(t)}`,`isTextNode(current): ${N(t)}`,`isElement(next): ${h(e)}`,`isTextNode(next): ${N(e)}`].join(" "))}function J(t){let e,s,o,i,l,a,n,d,u,c,r,p,k;return{c(){e=E("html"),s=E("head"),o=E("meta"),i=A(),l=E("title"),a=W("Sandbox"),n=A(),d=E("style"),u=A(),c=E("body"),r=E("div"),this.h()},l(v){e=m(v,"HTML",{lang:!0});var T=_(e);s=m(T,"HEAD",{});var y=_(s);o=m(y,"META",{charset:!0}),i=C(y),l=m(y,"TITLE",{});var x=_(l);a=Y(x,"Sandbox"),x.forEach(b),n=C(y),d=m(y,"STYLE",{});var D=_(d);D.forEach(b),y.forEach(b),u=C(T),c=m(T,"BODY",{class:!0});var L=_(c);r=m(L,"DIV",{}),_(r).forEach(b),L.forEach(b),T.forEach(b),this.h()},h(){g(o,"charset","utf-8"),g(c,"class","sandbox preview"),g(e,"lang","en")},m(v,T){j(v,e,T),f(e,s),f(s,o),f(s,i),f(s,l),f(l,a),f(s,n),f(s,d),t[2](d),f(e,u),f(e,c),f(c,r),t[3](r),p||(k=G(window,"message",t[1]),p=!0)},p:w,i:w,o:w,d(v){v&&b(e),t[2](null),t[3](null),p=!1,k()}}}function K(t,e,s){const o={};function i(n){var c,r;const d=(c=n==null?void 0:n.data)==null?void 0:c.type,u=(r=n==null?void 0:n.data)==null?void 0:r.value;switch(d){case"CONTENT_CHANGE":if(o==null?void 0:o.root){const p=document.createElement("div");p.innerHTML=u,S(o.root,p)}break;case"STYLE_CHANGE":if(o==null?void 0:o.styles){const p=u.replace("<style>","").replace("</style>","");s(0,o.styles.innerHTML=p,o)}break;default:console.error("Unknown event caught",{type:d,value:u})}}function l(n){M[n?"unshift":"push"](()=>{o.styles=n,s(0,o)})}function a(n){M[n?"unshift":"push"](()=>{o.root=n,s(0,o)})}return[o,i,l,a]}class R extends O{constructor(e){super();U(this,e,K,J,I,{})}}export{R as default};
