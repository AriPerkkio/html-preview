import{S as C,i as A,s as R,e as b,t as B,c as E,a as y,h as x,d as _,g as p,J as $,L,K as I,k as w,m as T,b as k,M as P,N as W,v as Y,O as G,l as H,w as O,x as V,y as D,q as M,o as N,B as S,n as z,P as Z,p as ee,Q as te,R as ne,T as re,U as oe}from"../chunks/vendor-b5f731c1.js";import{_ as ie}from"../chunks/preload-helper-e3bb3858.js";function F(s){let e,r,n,o;return{c(){e=b("button"),r=B("Remove editor")},l(t){e=E(t,"BUTTON",{});var i=y(e);r=x(i,"Remove editor"),i.forEach(_)},m(t,i){p(t,e,i),$(e,r),n||(o=L(e,"click",s[3]),n=!0)},p:I,d(t){t&&_(e),n=!1,o()}}}function se(s){let e,r,n,o=!s[1]&&F(s);return{c(){o&&o.c(),e=w(),r=b("div"),n=b("textarea"),this.h()},l(t){o&&o.l(t),e=T(t),r=E(t,"DIV",{class:!0});var i=y(r);n=E(i,"TEXTAREA",{class:!0}),y(n).forEach(_),i.forEach(_),this.h()},h(){n.value=s[0],k(n,"class","svelte-1awo5ji"),k(r,"class","codemirror-container svelte-1awo5ji"),P(r,"active",s[1])},m(t,i){o&&o.m(t,i),p(t,e,i),p(t,r,i),$(r,n),s[5](n)},p(t,[i]){t[1]?o&&(o.d(1),o=null):o?o.p(t,i):(o=F(t),o.c(),o.m(e.parentNode,e)),i&1&&(n.value=t[0]),i&2&&P(r,"active",t[1])},i:I,o:I,d(t){o&&o.d(t),t&&_(e),t&&_(r),s[5](null)}}}function ae(s,e,r){const n=W();let{code:o=""}=e,{editorId:t}=e,{active:i=!1}=e,c;Y(async()=>{let u=await ie(()=>import("../chunks/codemirror-c8ce28b6.js"),["chunks/codemirror-c8ce28b6.js","assets/codemirror-fc1cef62.css"]);await l(u.default)});async function l(u){if(!c)throw new Error("Missing ref to textarea");const h=u.fromTextArea(c,{lineNumbers:!0,lineWrapping:!0,mode:"htmlmixed",autoCloseBrackets:!0,autoCloseTags:!0,value:o});h.on("change",v=>{r(0,o=v.getValue()),n("change",{value:o,editorId:t})}),h.setValue(o)}function m(){n("remove",{editorId:t})}function f(u){G[u?"unshift":"push"](()=>{c=u,r(2,c)})}return s.$$set=u=>{"code"in u&&r(0,o=u.code),"editorId"in u&&r(4,t=u.editorId),"active"in u&&r(1,i=u.active)},s.$$.update=()=>{s.$$.dirty&19&&i&&n("change",{value:o,editorId:t})},[o,i,c,m,t,f]}class J extends C{constructor(e){super();A(this,e,ae,se,R,{code:0,editorId:4,active:1})}}function K(s,e,r){const n=s.slice();return n[8]=e[r],n}function Q(s,e){let r,n,o;return n=new J({props:{active:e[8]===e[1],editorId:e[8]}}),n.$on("change",e[5]),n.$on("remove",e[3]),{key:s,first:null,c(){r=H(),O(n.$$.fragment),this.h()},l(t){r=H(),V(n.$$.fragment,t),this.h()},h(){this.first=r},m(t,i){p(t,r,i),D(n,t,i),o=!0},p(t,i){e=t;const c={};i&3&&(c.active=e[8]===e[1]),i&1&&(c.editorId=e[8]),n.$set(c)},i(t){o||(M(n.$$.fragment,t),o=!0)},o(t){N(n.$$.fragment,t),o=!1},d(t){t&&_(r),S(n,t)}}}function le(s){let e,r,n,o,t,i,c,l=[],m=new Map,f,u,h,v=s[0];const U=a=>a[8];for(let a=0;a<v.length;a+=1){let d=K(s,v,a),g=U(d);m.set(g,l[a]=Q(g,d))}return{c(){e=b("button"),r=B("Next state"),n=w(),o=b("button"),t=B("Add editor"),i=w(),c=b("div");for(let a=0;a<l.length;a+=1)l[a].c()},l(a){e=E(a,"BUTTON",{});var d=y(e);r=x(d,"Next state"),d.forEach(_),n=T(a),o=E(a,"BUTTON",{});var g=y(o);t=x(g,"Add editor"),g.forEach(_),i=T(a),c=E(a,"DIV",{});var q=y(c);for(let j=0;j<l.length;j+=1)l[j].l(q);q.forEach(_)},m(a,d){p(a,e,d),$(e,r),p(a,n,d),p(a,o,d),$(o,t),p(a,i,d),p(a,c,d);for(let g=0;g<l.length;g+=1)l[g].m(c,null);f=!0,u||(h=[L(e,"click",s[4]),L(o,"click",s[2])],u=!0)},p(a,[d]){d&43&&(v=a[0],z(),l=Z(l,d,U,1,a,v,m,c,ne,Q,null,K),ee())},i(a){if(!f){for(let d=0;d<v.length;d+=1)M(l[d]);f=!0}},o(a){for(let d=0;d<l.length;d+=1)N(l[d]);f=!1},d(a){a&&_(e),a&&_(n),a&&_(o),a&&_(i),a&&_(c);for(let d=0;d<l.length;d+=1)l[d].d();u=!1,te(h)}}}const X=1;function ce(s,e,r){let n;const o=W();let t=[X],i=X;function c(){r(0,t=[...t,1+n])}function l(u){const{editorId:h}=u.detail;r(0,t=t.filter(v=>v!==h))}function m(){const u=Math.min(...t);if(i===n){r(1,i=u);return}const h=t.indexOf(i);r(1,i=t[1+h])}function f(u){const{value:h,editorId:v}=u.detail;v===i&&o("change",{value:h})}return s.$$.update=()=>{s.$$.dirty&1&&(n=Math.max(...t))},[t,i,c,l,m,f]}class ue extends C{constructor(e){super();A(this,e,ce,le,R,{})}}function fe(s){let e,r;return e=new J({props:{code:s[0],editorId:0}}),e.$on("change",s[1]),{c(){O(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,o){D(e,n,o),r=!0},p:I,i(n){r||(M(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){S(e,n)}}}function de(s){const e=`<style>
  
</style>`;function r(n){re.call(this,s,n)}return[e,r]}class _e extends C{constructor(e){super();A(this,e,de,fe,R,{})}}function me(s){let e,r,n,o,t,i,c,l,m;return i=new _e({}),i.$on("change",s[2]),l=new ue({}),l.$on("change",s[1]),{c(){e=b("div"),r=b("iframe"),o=w(),t=b("div"),O(i.$$.fragment),c=w(),O(l.$$.fragment),this.h()},l(f){e=E(f,"DIV",{class:!0});var u=y(e);r=E(u,"IFRAME",{security:!0,src:!0,title:!0}),y(r).forEach(_),o=T(u),t=E(u,"DIV",{});var h=y(t);V(i.$$.fragment,h),c=T(h),V(l.$$.fragment,h),h.forEach(_),u.forEach(_),this.h()},h(){k(r,"security","restricted"),oe(r.src,n="/sandbox")||k(r,"src",n),k(r,"title","Sandbox"),k(e,"class","wrapper svelte-wl8r8k")},m(f,u){p(f,e,u),$(e,r),s[3](r),$(e,o),$(e,t),D(i,t,null),$(t,c),D(l,t,null),m=!0},p:I,i(f){m||(M(i.$$.fragment,f),M(l.$$.fragment,f),m=!0)},o(f){N(i.$$.fragment,f),N(l.$$.fragment,f),m=!1},d(f){f&&_(e),s[3](null),S(i),S(l)}}}function he(s,e,r){const n={};function o(c){var m,f;const{value:l}=c.detail;(f=(m=n.sandbox)==null?void 0:m.contentWindow)==null||f.postMessage({type:"CONTENT_CHANGE",value:l})}function t(c){var m,f;const{value:l}=c.detail;(f=(m=n.sandbox)==null?void 0:m.contentWindow)==null||f.postMessage({type:"STYLE_CHANGE",value:l})}function i(c){G[c?"unshift":"push"](()=>{n.sandbox=c,r(0,n)})}return[n,o,t,i]}class ge extends C{constructor(e){super();A(this,e,he,me,R,{})}}export{ge as default};
